function t(){return"undefined"!=typeof chrome&&chrome.runtime?chrome:{storage:{local:{get:(t,e)=>{const n={};if(t.includes("compareList")){const t=localStorage.getItem("compareList");n.compareList=t?JSON.parse(t):[]}e(n)},set:(t,e)=>{t.compareList&&localStorage.setItem("compareList",JSON.stringify(t.compareList)),e&&e()}}},runtime:{sendMessage:t=>{"openComparePage"===t.action&&window.open("/compare.html","_blank")}}}}async function e(e,n){const o=t();if(e.startsWith("https://")?e=e.substring(8):e.startsWith("http://")&&(e=e.substring(7)),!o||!o.cookies)return function(t){const e=document.cookie.split(";");for(let n of e){const[e,o]=n.trim().split("=");if(e===t)return o}return null}(n);try{return new Promise(((t,r)=>{o.cookies.get({url:`https://${e}`,name:n},(s=>{!o.runtime.lastError&&s?t(s?s.value:null):o.cookies.get({url:`http://${e}`,name:n},(e=>{o.runtime.lastError?r(o.runtime.lastError):t(e?e.value:null)}))}))}))}catch(r){return null}}const n=async n=>{return {isLoggedIn:true,user:{id:1,name:"Guest"},token:"guest_token"}};async function o(o){try{const r=await async function(){const e=t();return new Promise((t=>{e.storage.local.get(["authToken","user","isLoggedIn"],(e=>{t({authToken:e.authToken||null,user:e.user||null,isLoggedIn:e.isLoggedIn||!1})}))}))}(),s=await e(o,"auth_token");return!!r.authToken!=!!s?n(o):r}catch(r){return{isLoggedIn:!1,error:r}}}const r=()=>"https://inlinetrans.kaibaohe.com/api",s=()=>"https://inlinetrans.kaibaohe.com";export{s as a,o as c,r as g,n as s};
